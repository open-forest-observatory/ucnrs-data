# UCNRS 2023 field reference data description

## Overview

**Data collection:** This dataset was collected in Summer 2023 at the UC Reserves Qual Ridge, Hastings, and Blue Oak Ridge using the field protocol and paper datasheet template archived in `protocol-docs/`.

**Raw field data:** The raw field data are in `unprocessed/`.

**Code to prepare analysis-ready dataset:** The code to process the raw data into tha analysis-ready data is in the `ucnrs-veg-mapping` repo at `field-reference-data-carpentry/field-reference-data-carpentry.R`.

**Analysis-ready dataset:** The analysis-ready data files are in `for-analysis/`. There is one primary file with field observations and geospatial locations (`survey.gpkg`) and one with ground-control point (GCP) locations (`gcps.gpkg`).

## Vegetation data records

The vegetation type(s) at each point is recorded as described in the protocol at `protocol-docs/drone-validation-protocol-for-crew.pdf`. Each veg type is recorded as a single-letter code as defined on the datasheet at `protocol-docs/cv-field-points-datasheet.pdf`. If veg types are intermixed or layered, multiple types may be recorded as described in the protocol. The spatial extent of the given veg type beyond the point is recorded as a radius (in meters), also as defined in the protocol.

## Point geospatial coordinates

The geospatial coordinates of the field survey points are embedded in the analysis-ready `.gpkg` data files.

**Correcting survey point locations:** Survey point locations were recorded using an Emlid RS2 rover receiving RTK corrections from an Emlid RS2 base station. Therefore, most field points (those with a `position_solution` of `FIX`) should all have an accurate position relative to one another (high "internal accuracy"). However, their *absolute* global position is only as accurate as the position where the base station thinks it is. The base station position is averaged for 2-5 minutes and is usually within 2-3 m of the location where it thinks it is. To make the position globally accurate, for each *base station location* (generally, one per field polygon), we computed a corrected base station location following [this workflow](https://docs.emlid.com/reachrs2/tutorials/post-processing-workflow/nrcan-workflow/). We then computed the offset (meters east and west) between the true location and the position initially recorded for the base. We then applied this correction to all points surveyed by a rover receiving corrections from the base station at the given *base station location*.

**Possible remaining location error:** The workflow used to correct point locations should work well when the rover unit has an RTK `FIX` based on the base station corrections it is receiving. In areas of moderate to high canopy cover, the position sometimes is not `FIX` and is instead `FLOAT`. This status is recorded in the `survey.gpkg` data file using the accurate `position_solution`. In cases of `FLOAT` it is still usually highly accurate but the accuracy is not guaranteed. An estimate of the accuracy can be obtained from and additional source (attributes of `survey.gpkg`): `lat_rms` and `lon_rms` which are the estimated root mean squared error in the position location (in meters), based on the variation in the rover's estimated position during the period of recording. I'd suggest trusting all points with a `FIX` solution and potentially trusting all with a `FLOAT` solution, but especially those with `position_samples` > 60 and `*_rms` < 0.1. Note that ideally when the position was `FLOAT`, we sould have averaged the position for at least ~60 seconds, but we did not do this but instead recorded the position immediately.

**Confirming position accuracy or fine-tuning positions using GCPs:** In the field, in addition to recording the locations of observation points, we also recorded the locations or one or more natural ground control points (GCPs), such as the edge of a prominent rock or stump, for each base station location. The GCP locations have been corrected following the same procedure described above for field observation points and are saved in the file `gcps.gpkg`, which also contains the field-recorded description of the GCP (e.g., "N edge of large boulder"). In many cases, the actual field validation observation points may be usable as GCPs too given that the include records of the type and spatial extent of the vegetation at the point. In cases where GCPs are visible and it appears the point coordinates are offset from the imagery, an additional correction (x,y shift) can be applied to align the points. In such a case, all points in the same polygon should be shifted the same, since they should all have been surveyed off of the same base station location and therefore have the same error. Finally, note that the drone imagery was not collected with the same RTK base station, so even if the field survey points have perfect absolute accuracy, they may be misaligned with the drone imagery due to an offset in the drone imagery. To correct for this, all the field points within a given drone flight footprint should be shifted in the same direction/amount to get them aligned.
